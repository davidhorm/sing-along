(this["webpackJsonpsing-along"]=this["webpackJsonpsing-along"]||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(0),r=n(19),a=n.n(r),o=(n(52),n(53),n(35)),s=(n(54),n(39)),d=n.n(s),l=n(105),u=n(15),j=n(110),h=n(106),b=n(108),f=n(107),v=n(109),O=n(103),g=function(){return Object(c.jsx)(u.b,{to:"/shuffle/0",children:Object(c.jsx)(O.a,{size:"large",variant:"outlined",style:{margin:"0.5rem"},endIcon:Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(c.jsx)("path",{d:"M17 17h-1.559l-9.7-10.673A1 1 0 0 0 5.001 6H2v2h2.559l4.09 4.5-4.09 4.501H2v2h3.001a1 1 0 0 0 .74-.327L10 13.987l4.259 4.686a1 1 0 0 0 .74.327H17v3l5-4-5-4v3z"}),Object(c.jsx)("path",{d:"M15.441 8H17v3l5-3.938L17 3v3h-2.001a1 1 0 0 0-.74.327l-3.368 3.707 1.48 1.346L15.441 8z"})]}),children:"Shuffle Play"})})},x=Object(l.a)({label:{flexDirection:"column",minWidth:"420px"},card:{margin:8,maxWidth:320},cardMedia:{height:180},cardTitle:{fontSize:"1rem",fontWeight:500}}),m=function(e){var t=e.songList,n=x();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"\ud83c\udf84\ud83c\udf85\ud83e\udd36\ud83c\udfb5 Christmas Sing Along \ud83c\udfb6\u2603\ufe0f\ud83c\udf81\ud83c\udf84"}),Object(c.jsx)("nav",{children:Object(c.jsx)(g,{})}),Object(c.jsx)("section",{className:"directory",children:t.sort((function(e,t){return e.songTitle.localeCompare(t.songTitle)})).map((function(e){var t=e.videoId,i=e.songTitle,r=e.songArtist,a=e.cc,o="https://img.youtube.com/vi/".concat(t,"/mqdefault.jpg"),s="Youtube Thumbnail of ".concat(i),l=i&&r?"":"/edit";return Object(c.jsx)(j.a,{className:n.card,children:Object(c.jsx)(u.b,{to:"/".concat(t).concat(l),children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(f.a,{className:n.cardMedia,component:"img",alt:s,title:s,image:o}),Object(c.jsxs)(b.a,{children:[Object(c.jsx)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",className:n.cardTitle,children:i}),Object(c.jsxs)(v.a,{variant:"body2",color:"textSecondary",component:"p",children:[r,a&&Object(c.jsx)(d.a,{className:"cc-icon"})]})]})]})})},t)}))})]})},p=n(28),y=n(22),I=n.n(y),S=n(33),w=n(16),T=n(40),E=n.n(T),N=function(e){return e?0:["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document?1:0},L=function(e){var t=e.divId,n=e.videoId,c=e.videoWidth,r=e.videoHeight,a=e.cc,o=void 0!==a&&a,s=e.onVideoEnd,d=Object(i.useState)(0),l=Object(w.a)(d,2),u=l[0],j=l[1],h=Object(i.useState)(),b=Object(w.a)(h,2),f=b[0],v=b[1];return Object(i.useEffect)((function(){var e,c=function(e){return{playerVars:{cc_load_policy:1,iv_load_policy:3,playsinline:N(e),modestbranding:1}}}(o),i=E()(t||n,c);i.loadVideoById(n),v(i);var r=function(){var t=Object(S.a)(I.a.mark((function t(){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getCurrentTime();case 2:n=t.sent,j(1e3*n),100,e=setInterval((function(){j((function(e){return e+100}))}),100);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){return clearInterval(e)},d=i.on("stateChange",(function(e){var t=window.YT.PlayerState,n=t.PLAYING,c=t.PAUSED,i=t.ENDED;switch(e.data){case n:r();break;case c:a();break;case i:a(),s&&s()}}));return function(){a(),i.off(d),i.destroy()}}),[t,n,o,s]),Object(i.useEffect)((function(){f&&c&&r&&f.setSize(c,r)}),[f,c,r]),{milliseconds:u}},C=(n(80),n(41)),P=function(e){var t=e.milliseconds,n=e.captionHeight,r=e.songTitle,a=e.songArtist,o=e.cc,s=Object(i.useState)(""),d=Object(w.a)(s,2),l=d[0],u=d[1];Object(i.useEffect)((function(){var e=o?"":"/sing-along/lyrics/".concat(r," - ").concat(a,".lrc");fetch(e).then((function(e){return e.text()})).then(u)}),[r,a,o]);var j=Object(i.useCallback)((function(e){var t=e.lrcLine,n=e.active;return Object(c.jsx)("div",{className:n?"active-line":"inactive-line",children:t.content})}),[]);return Object(c.jsx)(C.a,{className:"lrc",lrc:o?"[00:00.0] [CC Available]":l,currentTime:t,lineRenderer:j,style:{height:"calc(".concat(n,"px - 4em)"),overflow:"hidden"},spaceTop:0})},k=function(e){var t=e.divId,n=e.videoId,i=e.songTitle,r=e.songArtist,a=e.cc,o=e.onVideoEnd,s=function(){var e=document.getElementsByTagName("html")[0],t=e.clientHeight,n=e.clientWidth,c=.8*t,i=c<n,r={height:i?c:9*n/16,width:i?16*c/9:n};return{dimensions:{video:r,caption:{height:t-r.height}}}}().dimensions,d=s.video,l=s.caption,u=L({divId:t,videoId:n,videoWidth:d.width,videoHeight:d.height,cc:a,onVideoEnd:o}).milliseconds;return Object(c.jsxs)("section",{className:"karaoke",children:[Object(c.jsx)("div",{id:t||n}),Object(c.jsx)(P,{milliseconds:u,captionHeight:l.height,songTitle:i,songArtist:r,cc:a})]})},A=n(5),H=function(e){var t=e.songList,n=Object(A.g)().shuffleIndex,i=parseInt(n,10)%t.length,r=t[i],a=Object(A.f)();return Object(c.jsx)(k,Object(p.a)(Object(p.a)({},r),{},{onVideoEnd:function(){a.replace("/shuffle/".concat(i+1))},divId:"video-player"}))},M=function(e){var t=e.songList,n=Object(A.g)().videoId,i=t.filter((function(e){return e.videoId===n}))[0]||{};return Object(c.jsx)(k,Object(p.a)({},i))},D=function(){var e=Object(i.useState)([]),t=Object(w.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)([]),s=Object(w.a)(a,2),d=s[0],l=s[1],u=Object(A.g)().videoId,j=L({videoId:u}).milliseconds,h={border:"solid 1px gray"};return Object(c.jsxs)("section",{className:"sync-lyrics",style:{display:"flex"},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{id:u}),Object(c.jsx)("br",{}),Object(c.jsx)("textarea",{style:h,onChange:function(e){return r(e.target.value.split("\n"))}}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{style:h,onClick:function(){return l((function(e){return[].concat(Object(o.a)(e),[j])}))},children:"SET TIME"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{style:h,onClick:function(){return l((function(e){return e.filter((function(e,t){return t!==d.length-1}))}))},children:"UNDO"})]}),Object(c.jsx)("div",{style:{paddingLeft:"1em",maxHeight:"100vh",overflow:"auto"},children:n.map((function(e,t){var n=d[t]?"[".concat(new Date(0,0,0,0,0,0,d[t]).toISOString().substring(14,21),"] "):"";return Object(c.jsxs)("div",{children:[n,e]},t)}))})]})},B=function(){var e=function(e){var t=Object(i.useState)(""),n=Object(w.a)(t,2),c=n[0],r=n[1];return Object(i.useEffect)((function(){e&&function(){var t=Object(S.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then((function(e){return e.text()})).then((function(e){return r(e)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),{data:c}}("/sing-along/lyrics/index.json").data,t=e?JSON.parse(e):[],n=Object(o.a)(t).sort((function(){return.5-Math.random()}));return Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(A.c,{children:[Object(c.jsx)(A.a,{path:"/shuffle/:shuffleIndex",children:Object(c.jsx)(H,{songList:n})}),Object(c.jsx)(A.a,{path:"/:videoId/edit",children:Object(c.jsx)(D,{})}),Object(c.jsx)(A.a,{path:"/:videoId",children:Object(c.jsx)(M,{songList:t})}),Object(c.jsx)(A.a,{path:"/",children:Object(c.jsx)(m,{songList:t})})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(c.jsx)(i.StrictMode,{children:Object(c.jsx)(u.a,{children:Object(c.jsx)(B,{})})}),document.getElementById("root")),V()}},[[81,1,2]]]);
//# sourceMappingURL=main.6b5a8264.chunk.js.map