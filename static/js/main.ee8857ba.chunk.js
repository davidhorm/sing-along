(this["webpackJsonpsing-along"]=this["webpackJsonpsing-along"]||[]).push([[0],{53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(18),i=c.n(s),a=(c(53),c(54),c(15)),o=c(43),l=c(113),r=c(6),d=(c(55),c(40)),j=c.n(d),h=c(108),b=c(114),O=c(109),g=c(111),u=c(110),x=c(112),m=c(106),v=c(2);const f=()=>Object(v.jsx)(a.b,{to:"/shuffle/0",children:Object(v.jsx)(m.a,{size:"large",variant:"outlined",style:{margin:"0.5rem"},endIcon:Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[Object(v.jsx)("path",{fill:"currentColor",d:"M17 17h-1.559l-9.7-10.673A1 1 0 0 0 5.001 6H2v2h2.559l4.09 4.5-4.09 4.501H2v2h3.001a1 1 0 0 0 .74-.327L10 13.987l4.259 4.686a1 1 0 0 0 .74.327H17v3l5-4-5-4v3z"}),Object(v.jsx)("path",{fill:"currentColor",d:"M15.441 8H17v3l5-3.938L17 3v3h-2.001a1 1 0 0 0-.74.327l-3.368 3.707 1.48 1.346L15.441 8z"})]}),children:"Shuffle Play"})}),p=Object(h.a)({label:{flexDirection:"column",minWidth:"420px"},card:{margin:8,maxWidth:320},cardMedia:{height:180},cardTitle:{fontSize:"1rem",fontWeight:500}}),y=e=>{let{songList:t}=e;const c=p();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{children:"\ud83c\udf84\ud83c\udf85\ud83e\udd36\ud83c\udfb5 Christmas Sing Along \ud83c\udfb6\u2603\ufe0f\ud83c\udf81\ud83c\udf84"}),Object(v.jsx)("nav",{children:Object(v.jsx)(f,{})}),Object(v.jsx)("section",{className:"directory",children:t.sort(((e,t)=>e.songTitle.localeCompare(t.songTitle))).map((e=>{let{videoId:t,songTitle:n,songArtist:s,cc:i}=e;const o="https://img.youtube.com/vi/".concat(t,"/mqdefault.jpg"),l="Youtube Thumbnail of ".concat(n),r=n&&s?"":"/edit";return Object(v.jsx)(b.a,{className:c.card,children:Object(v.jsx)(a.b,{to:"/".concat(t).concat(r),children:Object(v.jsxs)(O.a,{children:[Object(v.jsx)(u.a,{className:c.cardMedia,component:"img",alt:l,title:l,image:o}),Object(v.jsxs)(g.a,{children:[Object(v.jsx)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",className:c.cardTitle,children:n}),Object(v.jsxs)(x.a,{variant:"body2",color:"textSecondary",component:"p",children:[s,i&&Object(v.jsx)(j.a,{className:"cc-icon"})]})]})]})})},t)}))})]})};var I=c(41),S=c.n(I);const T=e=>!e&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)?1:0,w=e=>{let{videoId:t,cc:c=!1,onVideoEnd:s}=e;const[i,a]=Object(n.useState)(0);return Object(n.useEffect)((()=>{const e=(e=>({height:"100%",width:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,playsinline:T(e),modestbranding:1}}))(c),n=S()(t,e);let i;n.loadVideoById(t);const o=()=>clearInterval(i),l=n.on("stateChange",(e=>{const{PLAYING:t,PAUSED:c,ENDED:l}=window.YT.PlayerState;switch(e.data){case t:(async()=>{const e=await n.getCurrentTime();a(1e3*e),i=setInterval((()=>{a((e=>e+100))}),100)})();break;case c:o();break;case l:o(),s&&s()}}));return()=>{o(),n.off(l),n.destroy()}}),[t,c,s]),{milliseconds:i}};c(81);var C=c(42);c(82);const N=e=>{let{milliseconds:t,songTitle:c,songArtist:s,cc:i}=e;const[a,o]=Object(n.useState)("");Object(n.useEffect)((()=>{const e=i?"":"/sing-along/lyrics/".concat(c," - ").concat(s,".lrc");fetch(e).then((e=>e.text())).then(o)}),[c,s,i]);const l=Object(n.useCallback)((e=>{let{lrcLine:t,active:c}=e;return Object(v.jsx)("div",{className:c?"active-line":"inactive-line",children:t.content})}),[]);return Object(v.jsx)(C.a,{className:"lrc",lrc:i?"[00:00.0] [CC Available]":a,currentTime:t,lineRenderer:l,spaceTop:0})},E=e=>{let{videoId:t,songTitle:c,songArtist:n,cc:s,onVideoEnd:i}=e;const{milliseconds:a}=w({videoId:t,cc:s,onVideoEnd:i});return Object(v.jsxs)("section",{className:"karaoke",children:[Object(v.jsx)("div",{className:"video",children:Object(v.jsx)("div",{id:t})}),!s&&Object(v.jsx)(N,{milliseconds:a,songTitle:c,songArtist:n,cc:s})]})},L=e=>{let{songList:t}=e;const{shuffleIndex:c}=Object(r.g)(),s=parseInt(c,10)%t.length,i=t[s],a=Object(r.f)();return Object(n.createElement)(E,{...i,onVideoEnd:()=>{a.replace("/shuffle/".concat(s+1))},key:c})},P=e=>{let{songList:t}=e;const{videoId:c}=Object(r.g)(),n=t.filter((e=>e.videoId===c))[0]||{};return Object(v.jsx)(E,{...n})},k=()=>{const[e,t]=Object(n.useState)([]),[c,s]=Object(n.useState)([]),{videoId:i}=Object(r.g)(),{milliseconds:a}=w({videoId:i});return Object(v.jsxs)("section",{className:"sync-lyrics",style:{display:"flex"},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{id:i}),Object(v.jsx)("br",{}),Object(v.jsx)("textarea",{style:{border:"solid 1px gray",height:"35%",width:"100%"},onChange:e=>t(e.target.value.split("\n"))}),Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{variant:"outlined",onClick:()=>s((e=>[...e,a])),children:"SET TIME"}),Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{variant:"outlined",onClick:()=>s((e=>e.filter(((e,t)=>t!==c.length-1)))),children:"UNDO"})]}),Object(v.jsx)("div",{style:{paddingLeft:"1em",maxHeight:"100vh",overflow:"auto"},children:e.map(((e,t)=>{const n=c[t]?"[".concat(new Date(0,0,0,0,0,0,c[t]).toISOString().substring(14,21),"] "):"";return Object(v.jsxs)("div",{children:[n,e]},t)}))})]})},A=Object(o.a)({palette:{type:"dark"}});var M=()=>{const{data:e}=(e=>{const[t,c]=Object(n.useState)("");return Object(n.useEffect)((()=>{e&&(async()=>{fetch(e).then((e=>e.text())).then((e=>c(e)))})()}),[e]),{data:t}})("/sing-along/lyrics/index.json"),t=e?JSON.parse(e):[],c=[...t].sort((()=>.5-Math.random()));return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(l.a,{theme:A,children:Object(v.jsxs)(r.c,{children:[Object(v.jsx)(r.a,{path:"/shuffle/:shuffleIndex",children:Object(v.jsx)(L,{songList:c})}),Object(v.jsx)(r.a,{path:"/:videoId/edit",children:Object(v.jsx)(k,{})}),Object(v.jsx)(r.a,{path:"/:videoId",children:Object(v.jsx)(P,{songList:t})}),Object(v.jsx)(r.a,{path:"/",children:Object(v.jsx)(y,{songList:t})})]})})})};var D=e=>{e&&e instanceof Function&&c.e(3).then(c.bind(null,115)).then((t=>{let{getCLS:c,getFID:n,getFCP:s,getLCP:i,getTTFB:a}=t;c(e),n(e),s(e),i(e),a(e)}))};i.a.render(Object(v.jsx)(n.StrictMode,{children:Object(v.jsx)(a.a,{children:Object(v.jsx)(M,{})})}),document.getElementById("root")),D()}},[[83,1,2]]]);
//# sourceMappingURL=main.ee8857ba.chunk.js.map